<div xmlns:th="http://www.thymeleaf.org">

    <th:block th:fragment="headers">
        <th>ID</th>
        <th>Owner</th>
        <th>Pet</th>
        <th>Start</th>
        <th>End</th>
        <th>Reason</th>
        <th>Status</th>
        <th class="pc-table__actions">Actions</th>
    </th:block>

    <!-- PENDING rows -->
    <th:block th:fragment="rowsPending(pendingAppointments)">
        <tr th:each="a : ${pendingAppointments}">
            <td th:text="${a.id}"></td>
            <td th:text="${a.owner.fullName + ' (ID: ' + a.owner.id + ')'}"></td>
            <td th:text="${a.pet.name + ' (ID: ' + a.pet.id + ')'}"></td>
            <td th:text="${a.startTime}"></td>
            <td th:text="${a.endTime}"></td>
            <td th:text="${a.reason}"></td>
            <td th:text="${a.status}"></td>

            <td class="pc-table__actions">
                <div class="pc-table__actions-inner">

                    <form th:action="@{/vet/appointments/{id}/confirm(id=${a.id})}" method="post">
                        <th:block th:replace="~{fragments/components/button :: button(
                            'Confirm',
                            'secondary-inverse',
                            true,
                            null
                        )}"/>
                    </form>

                    <form th:action="@{/vet/appointments/{id}/cancel(id=${a.id})}" method="post">
                        <input type="hidden" name="from" value="pending"/>
                        <input type="text" name="notes" placeholder="cancel notes (optional)"/>

                        <th:block th:replace="~{fragments/components/button :: button(
                            'Cancel',
                            'primary-inverse',
                            true,
                            null
                        )}"/>
                    </form>

                </div>
            </td>
        </tr>
    </th:block>

    <!-- CONFIRMED rows -->
    <th:block th:fragment="rowsConfirmed(confirmedAppointments)">
        <tr th:each="a : ${confirmedAppointments}">
            <td th:text="${a.id}"></td>
            <td th:text="${a.owner.fullName + ' (ID: ' + a.owner.id + ')'}"></td>
            <td th:text="${a.pet.name + ' (ID: ' + a.pet.id + ')'}"></td>
            <td th:text="${a.startTime}"></td>
            <td th:text="${a.endTime}"></td>
            <td th:text="${a.reason}"></td>
            <td th:text="${a.status}"></td>

            <td class="pc-table__actions">
                <div class="pc-table__actions-inner">

                    <form th:action="@{/vet/appointments/{id}/complete(id=${a.id})}" method="post">
                        <input type="text" name="notes" placeholder="complete notes (optional)"/>

                        <th:block th:replace="~{fragments/components/button :: button(
                            'Complete',
                            'secondary-inverse',
                            true,
                            null
                        )}"/>
                    </form>

                    <form th:action="@{/vet/appointments/{id}/cancel(id=${a.id})}" method="post">
                        <input type="hidden" name="from" value="confirmed"/>
                        <input type="text" name="notes" placeholder="cancel notes (optional)"/>

                        <th:block th:replace="~{fragments/components/button :: button(
                            'Cancel',
                            'primary-inverse',
                            true,
                            null
                        )}"/>
                    </form>

                </div>
            </td>
        </tr>
    </th:block>

</div>
